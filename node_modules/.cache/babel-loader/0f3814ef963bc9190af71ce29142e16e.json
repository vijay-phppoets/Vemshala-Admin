{"ast":null,"code":"import _defineProperty from\"/home/kuldeep/Git Hub/Vemshala-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/kuldeep/Git Hub/Vemshala-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/kuldeep/Git Hub/Vemshala-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Form,Row,Col,Select,Button,Input,InputNumber,message,DatePicker,Space}from\"antd\";import{connect}from\"react-redux\";import{Redirect}from\"react-router-dom\";import moment from'moment';/* custom component */import Header from\"../../component/Header/Header\";import{PageContainer}from\"../../component/Xcomponent\";/* actions */import{updateVoucher as _updateVoucher,updateVoucherReset as _updateVoucherReset}from\"../../action/updateVoucherAction\";import{getVoucherView as _getVoucherView,getVoucherViewReset as _getVoucherViewReset}from\"../../action/getVoucherViewAction\";var RangePicker=DatePicker.RangePicker;var VoucherEdit=function VoucherEdit(props){/* variables */var voucher_id=props.match.params.voucher_id;var updateVoucher=props.updateVoucher,updateVoucherReset=props.updateVoucherReset,updateVoucherState=props.updateVoucherState,getVoucherView=props.getVoucherView,getVoucherViewReset=props.getVoucherViewReset,getVoucherViewState=props.getVoucherViewState;var _useState=useState({voucher_id:voucher_id,type:\"percentage\",status:\"active\",name:\"\",code:\"\",description:\"\",no_of_usage_for_all:\"\",discount:\"\",minimum_cart_value:\"\",maximum_discount_amount:\"\",valid_from:\"\",valid_to:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState3=useState([false,'']),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setRedirect=_useState4[1];/* callbacks */useEffect(function(){return function(){getVoucherViewReset();updateVoucherReset();};},[]);useEffect(function(){getVoucherView({voucher_id:voucher_id});},[]);useEffect(function(){if(getVoucherViewState.apiState===\"success\"){var _objectSpread2;form.setFieldsValue({type:getVoucherViewState.coupon.type,status:getVoucherViewState.coupon.status,name:getVoucherViewState.coupon.name,code:getVoucherViewState.coupon.code,description:getVoucherViewState.coupon.description,no_of_usage_for_all:getVoucherViewState.coupon.no_of_usage_for_all,discount:getVoucherViewState.coupon.discount,minimum_cart_value:getVoucherViewState.coupon.minimum_cart_value,maximum_discount_amount:getVoucherViewState.coupon.maximum_discount_amount,validity:[moment(moment(getVoucherViewState.coupon.valid_from).format(\"YYYY-MM-DD HH:mm:ss\"),'YYYY-MM-DD HH:mm:ss'),moment(moment(getVoucherViewState.coupon.valid_to).format(\"YYYY-MM-DD HH:mm:ss\"),'YYYY-MM-DD HH:mm:ss')]});setFormData(_objectSpread(_objectSpread({},formData),{},(_objectSpread2={},_defineProperty(_objectSpread2,'type',getVoucherViewState.coupon.type),_defineProperty(_objectSpread2,'status',getVoucherViewState.coupon.status),_defineProperty(_objectSpread2,'name',getVoucherViewState.coupon.name),_defineProperty(_objectSpread2,'code',getVoucherViewState.coupon.code),_defineProperty(_objectSpread2,'description',getVoucherViewState.coupon.description),_defineProperty(_objectSpread2,'no_of_usage_for_all',getVoucherViewState.coupon.no_of_usage_for_all),_defineProperty(_objectSpread2,'discount',getVoucherViewState.coupon.discount),_defineProperty(_objectSpread2,'minimum_cart_value',getVoucherViewState.coupon.minimum_cart_value),_defineProperty(_objectSpread2,'maximum_discount_amount',getVoucherViewState.coupon.maximum_discount_amount),_defineProperty(_objectSpread2,\"valid_from\",moment(getVoucherViewState.coupon.valid_from).format(\"DD-MM-YYYY HH:mm:ss\")),_defineProperty(_objectSpread2,\"valid_to\",moment(getVoucherViewState.coupon.valid_to).format(\"DD-MM-YYYY HH:mm:ss\")),_objectSpread2)));}},[getVoucherViewState]);useEffect(function(){form.setFieldsValue({status:\"active\",type:\"percentage\"});},[]);useEffect(function(){if(updateVoucherState.apiState===\"success\"){setRedirect([true,'/voucher_management/list']);message.success(updateVoucherState.message);}if(updateVoucherState.apiState===\"error\"){updateVoucherReset();message.error(updateVoucherState.message);}},[updateVoucherState]);/* functions */var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var handleNumberChange=function handleNumberChange(name,value){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};var handleDatePickerChange=function handleDatePickerChange(date,dateString){var _objectSpread5;setFormData(_objectSpread(_objectSpread({},formData),{},(_objectSpread5={},_defineProperty(_objectSpread5,\"valid_from\",dateString[0]),_defineProperty(_objectSpread5,\"valid_to\",dateString[1]),_objectSpread5)));};var handleSelect=function handleSelect(name,value){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(){updateVoucher(formData);};return/*#__PURE__*/React.createElement(React.Fragment,null,redirect[0]&&/*#__PURE__*/React.createElement(Redirect,{to:redirect[1]}),/*#__PURE__*/React.createElement(Header,{title:\"Add Voucher\"}),/*#__PURE__*/React.createElement(PageContainer,null,/*#__PURE__*/React.createElement(Form,{layout:\"vertical\",form:form,onFinish:handleSubmit},/*#__PURE__*/React.createElement(Row,{gutter:\"24\"},/*#__PURE__*/React.createElement(Col,{span:\"12\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Name\",name:\"name\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(Input,{name:\"name\",placeholder:\"Enter Coupon Name\",onChange:handleChange}))),/*#__PURE__*/React.createElement(Col,{span:\"12\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Code\",name:\"code\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(Input,{name:\"code\",placeholder:\"Enter Coupon Code\",onChange:handleChange})))),/*#__PURE__*/React.createElement(Row,{gutter:\"24\"},/*#__PURE__*/React.createElement(Col,{span:\"24\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Description\",name:\"description\"},/*#__PURE__*/React.createElement(Input.TextArea,{name:\"description\",placeholder:\"Enter Description\",onChange:handleChange})))),/*#__PURE__*/React.createElement(Row,{gutter:\"24\"},/*#__PURE__*/React.createElement(Col,{span:\"6\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"No of usage for all\",name:\"no_of_usage_for_all\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(Input,{name:\"no_of_usage_for_all\",placeholder:\"No of usage for all\",onChange:handleChange})))),/*#__PURE__*/React.createElement(Row,{gutter:\"24\"},/*#__PURE__*/React.createElement(Col,{span:\"12\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Validity\",name:\"validity\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(RangePicker,{showTime:true,format:\"DD-MM-YYYY HH:mm:ss\",onChange:handleDatePickerChange})))),/*#__PURE__*/React.createElement(Row,{gutter:\"24\"},/*#__PURE__*/React.createElement(Col,{span:\"6\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Type\",name:\"type\"},/*#__PURE__*/React.createElement(Select,{name:\"type\",placeholder:\"Select Type\",defaultValue:\"percentage\",onSelect:function onSelect(v){return handleNumberChange(\"type\",v);}},/*#__PURE__*/React.createElement(Select.Option,{key:\"percentage\",value:\"percentage\"},\"Percentage\"),/*#__PURE__*/React.createElement(Select.Option,{key:\"flat\",value:\"flat\"},\"Flat\")))),/*#__PURE__*/React.createElement(Col,{span:\"6\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Discount\",name:\"discount\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(InputNumber,{name:\"discount\",placeholder:\"Enter discount\",style:{width:\"100%\"},min:0,onChange:function onChange(v){return handleNumberChange(\"discount\",v);}})))),/*#__PURE__*/React.createElement(Row,{gutter:\"24\"},/*#__PURE__*/React.createElement(Col,{span:\"6\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Minimum cart value\",name:\"minimum_cart_value\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(InputNumber,{name:\"minimum_cart_value\",placeholder:\"Enter minimum cart value\",style:{width:\"100%\"},min:0,onChange:function onChange(v){return handleNumberChange(\"minimum_cart_value\",v);}}))),/*#__PURE__*/React.createElement(Col,{span:\"6\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Maximum discount amount\",name:\"maximum_discount_amount\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(InputNumber,{name:\"maximum_discount_amount\",placeholder:\"Enter maximum discount amount\",style:{width:\"100%\"},min:0,onChange:function onChange(v){return handleNumberChange(\"maximum_discount_amount\",v);}}))),/*#__PURE__*/React.createElement(Col,{span:\"6\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Status\",name:\"status\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(Select,{name:\"status\",placeholder:\"Select Status\",onSelect:function onSelect(v){return handleNumberChange(\"status\",v);}},/*#__PURE__*/React.createElement(Select.Option,{key:\"active\",value:\"active\"},\"Active\"),/*#__PURE__*/React.createElement(Select.Option,{key:\"inactive\",value:\"inactive\"},\"Inactive\"))))),/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",loading:updateVoucherState.apiState===\"loading\"},\"SUBMIT\"))));};var mapStateToProps=function mapStateToProps(state){return{updateVoucherState:state.updateVoucher,getVoucherViewState:state.getVoucherView};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{updateVoucher:function updateVoucher(params){return dispatch(_updateVoucher(params));},updateVoucherReset:function updateVoucherReset(){return dispatch(_updateVoucherReset());},getVoucherView:function getVoucherView(params){return dispatch(_getVoucherView(params));},getVoucherViewReset:function getVoucherViewReset(){return dispatch(_getVoucherViewReset());}};};export default connect(mapStateToProps,mapDispatchToProps)(VoucherEdit);","map":{"version":3,"sources":["/home/kuldeep/Git Hub/Vemshala-Admin/src/page/VoucherEdit/VoucherEdit.js"],"names":["React","useState","useEffect","Form","Row","Col","Select","Button","Input","InputNumber","message","DatePicker","Space","connect","Redirect","moment","Header","PageContainer","updateVoucher","updateVoucherReset","getVoucherView","getVoucherViewReset","RangePicker","VoucherEdit","props","voucher_id","match","params","updateVoucherState","getVoucherViewState","type","status","name","code","description","no_of_usage_for_all","discount","minimum_cart_value","maximum_discount_amount","valid_from","valid_to","formData","setFormData","useForm","form","redirect","setRedirect","apiState","setFieldsValue","coupon","validity","format","success","error","handleChange","e","target","value","handleNumberChange","handleDatePickerChange","date","dateString","handleSelect","handleSubmit","required","v","width","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Form, Row, Col, Select, Button, Input, InputNumber, message, DatePicker, Space } from \"antd\"\nimport { connect } from \"react-redux\"\nimport { Redirect } from \"react-router-dom\"\nimport moment from 'moment'\n\n/* custom component */\nimport Header from \"../../component/Header/Header\"\nimport { PageContainer } from \"../../component/Xcomponent\"\n\n/* actions */\nimport { updateVoucher, updateVoucherReset } from \"../../action/updateVoucherAction\"\nimport { getVoucherView, getVoucherViewReset } from \"../../action/getVoucherViewAction\"\nconst { RangePicker } = DatePicker;\nconst VoucherEdit = props => {\n    /* variables */\n    const voucher_id = props.match.params.voucher_id\n    const {\n        updateVoucher, updateVoucherReset, updateVoucherState,\n        getVoucherView, getVoucherViewReset, getVoucherViewState,\n    } = props\n    const [formData, setFormData] = useState({\n        voucher_id: voucher_id,\n        type: \"percentage\",\n        status: \"active\",\n        name: \"\",\n        code: \"\",\n        description: \"\",\n        no_of_usage_for_all: \"\",\n        discount: \"\",\n        minimum_cart_value: \"\",\n        maximum_discount_amount: \"\",\n        valid_from: \"\",\n        valid_to: \"\",\n\n    })\n    const [form] = Form.useForm()\n    const [redirect, setRedirect] = useState([false, ''])\n\n    /* callbacks */\n    useEffect(() => {\n        return (() => {\n            getVoucherViewReset()\n            updateVoucherReset()\n        })\n    }, [])\n    useEffect(() => {\n        getVoucherView({\n            voucher_id: voucher_id\n        })\n    }, [])\n    useEffect(() => {\n        if (getVoucherViewState.apiState === \"success\") {\n            form.setFieldsValue({\n                type: getVoucherViewState.coupon.type,\n                status: getVoucherViewState.coupon.status,\n                name: getVoucherViewState.coupon.name,\n                code: getVoucherViewState.coupon.code,\n                description: getVoucherViewState.coupon.description,\n                no_of_usage_for_all: getVoucherViewState.coupon.no_of_usage_for_all,\n                discount: getVoucherViewState.coupon.discount,\n                minimum_cart_value: getVoucherViewState.coupon.minimum_cart_value,\n                maximum_discount_amount: getVoucherViewState.coupon.maximum_discount_amount,\n                validity: [moment(moment(getVoucherViewState.coupon.valid_from).format(\"YYYY-MM-DD HH:mm:ss\"), 'YYYY-MM-DD HH:mm:ss'), moment(moment(getVoucherViewState.coupon.valid_to).format(\"YYYY-MM-DD HH:mm:ss\"), 'YYYY-MM-DD HH:mm:ss')],\n            })\n            setFormData({\n                ...formData,\n                ['type']: getVoucherViewState.coupon.type,\n                ['status']: getVoucherViewState.coupon.status,\n                ['name']: getVoucherViewState.coupon.name,\n                ['code']: getVoucherViewState.coupon.code,\n                ['description']: getVoucherViewState.coupon.description,\n                ['no_of_usage_for_all']: getVoucherViewState.coupon.no_of_usage_for_all,\n                ['discount']: getVoucherViewState.coupon.discount,\n                ['minimum_cart_value']: getVoucherViewState.coupon.minimum_cart_value,\n                ['maximum_discount_amount']: getVoucherViewState.coupon.maximum_discount_amount,\n                [\"valid_from\"]: moment(getVoucherViewState.coupon.valid_from).format(\"DD-MM-YYYY HH:mm:ss\"),\n                [\"valid_to\"]: moment(getVoucherViewState.coupon.valid_to).format(\"DD-MM-YYYY HH:mm:ss\"),\n            })\n        }\n    }, [getVoucherViewState])\n\n    useEffect(() => {\n        form.setFieldsValue({\n            status: \"active\",\n            type: \"percentage\"\n        })\n    }, [])\n\n    useEffect(() => {\n        if (updateVoucherState.apiState === \"success\") {\n            setRedirect([true, '/voucher_management/list'])\n            message.success(updateVoucherState.message);\n        }\n\n        if (updateVoucherState.apiState === \"error\") {\n            updateVoucherReset()\n            message.error(updateVoucherState.message);\n        }\n    }, [updateVoucherState])\n\n    /* functions */\n    const handleChange = e => {\n        setFormData({ ...formData, [e.target.name]: e.target.value })\n    }\n\n    const handleNumberChange = (name, value) => {\n        setFormData({ ...formData, [name]: value })\n    }\n    const handleDatePickerChange = (date, dateString) => {\n        setFormData(({\n            ...formData,\n            [\"valid_from\"]: dateString[0],\n            [\"valid_to\"]: dateString[1]\n        }))\n    }\n\n    const handleSelect = (name, value) => {\n        setFormData({ ...formData, [name]: value })\n    }\n\n    const handleSubmit = () => {\n        updateVoucher(formData)\n    }\n\n\n    return (\n        <>\n            {redirect[0] &&\n                <Redirect to={redirect[1]} />}\n\n            <Header\n                title=\"Add Voucher\"\n            />\n            <PageContainer>\n                <Form layout=\"vertical\" form={form} onFinish={handleSubmit} >\n\n                    <Row gutter=\"24\" >\n                        <Col span=\"12\">\n                            <Form.Item\n                                label=\"Name\"\n                                name=\"name\"\n                                rules={[{ required: true, message: 'Required' }]}\n                            >\n                                <Input name=\"name\" placeholder=\"Enter Coupon Name\"\n                                    onChange={handleChange}\n                                />\n                            </Form.Item>\n                        </Col>\n                        <Col span=\"12\">\n                            <Form.Item\n                                label=\"Code\"\n                                name=\"code\"\n                                rules={[{ required: true, message: 'Required' }]}\n                            >\n                                <Input name=\"code\" placeholder=\"Enter Coupon Code\"\n                                    onChange={handleChange}\n                                />\n                            </Form.Item>\n                        </Col>\n                    </Row>\n                    <Row gutter=\"24\" >\n                        <Col span=\"24\">\n                            <Form.Item\n                                label=\"Description\"\n                                name=\"description\"\n                            >\n                                <Input.TextArea name=\"description\" placeholder=\"Enter Description\"\n                                    onChange={handleChange}\n                                />\n                            </Form.Item>\n                        </Col>\n                    </Row>\n\n                    <Row gutter=\"24\" >\n                        <Col span=\"6\">\n                            <Form.Item\n                                label=\"No of usage for all\"\n                                name=\"no_of_usage_for_all\"\n                                rules={[{ required: true, message: 'Required' }]}\n                            >\n                                <Input name=\"no_of_usage_for_all\" placeholder=\"No of usage for all\"\n                                    onChange={handleChange}\n                                />\n                            </Form.Item>\n                        </Col>\n                        {/* <Col span=\"6\">\n                            <Form.Item\n                                label=\"No of usage for a customer\"\n                                name=\"no_of_usage_for_a_customer\"\n                                rules={[{ required: true, message: 'Required' }]}\n                            >\n                                <Input name=\"no_of_usage_for_a_customer\" placeholder=\"No of usage for a customer\"\n                                    onChange={handleChange}\n                                />\n                            </Form.Item>\n                        </Col> */}\n                    </Row>\n                    <Row gutter=\"24\" >\n                        <Col span=\"12\">\n                            <Form.Item\n                                label=\"Validity\"\n                                name=\"validity\"\n                                rules={[\n                                    { required: true, message: 'Required' },\n                                ]}\n                            >\n                                <RangePicker showTime format=\"DD-MM-YYYY HH:mm:ss\" onChange={handleDatePickerChange} />\n                            </Form.Item>\n                        </Col>\n                    </Row>\n\n                    <Row gutter=\"24\">\n                        <Col span=\"6\">\n                            <Form.Item\n                                label=\"Type\"\n                                name=\"type\"\n                            >\n                                <Select name=\"type\" placeholder=\"Select Type\" defaultValue=\"percentage\"\n                                    onSelect={v => handleNumberChange(\"type\", v)}\n                                >\n                                    <Select.Option key=\"percentage\" value=\"percentage\">Percentage</Select.Option>\n                                    <Select.Option key=\"flat\" value=\"flat\">Flat</Select.Option>\n                                </Select>\n                            </Form.Item>\n                        </Col>\n                        <Col span=\"6\">\n                            <Form.Item\n                                label=\"Discount\"\n                                name=\"discount\"\n                                rules={[{ required: true, message: 'Required' }]}\n                            >\n                                <InputNumber name=\"discount\" placeholder=\"Enter discount\" style={{ width: \"100%\" }} min={0}\n                                    onChange={v => handleNumberChange(\"discount\", v)}\n                                />\n                            </Form.Item>\n                        </Col>\n                    </Row>\n                    <Row gutter=\"24\" >\n                        <Col span=\"6\">\n                            <Form.Item\n                                label=\"Minimum cart value\"\n                                name=\"minimum_cart_value\"\n                                rules={[{ required: true, message: 'Required' }]}\n                            >\n                                <InputNumber name=\"minimum_cart_value\" placeholder=\"Enter minimum cart value\" style={{ width: \"100%\" }} min={0}\n                                    onChange={v => handleNumberChange(\"minimum_cart_value\", v)}\n                                />\n                            </Form.Item>\n                        </Col>\n                        <Col span=\"6\">\n                            <Form.Item\n                                label=\"Maximum discount amount\"\n                                name=\"maximum_discount_amount\"\n                                rules={[{ required: true, message: 'Required' }]}\n                            >\n                                <InputNumber name=\"maximum_discount_amount\" placeholder=\"Enter maximum discount amount\" style={{ width: \"100%\" }} min={0}\n                                    onChange={v => handleNumberChange(\"maximum_discount_amount\", v)}\n                                />\n                            </Form.Item>\n                        </Col>\n                        <Col span=\"6\">\n                            <Form.Item\n                                label=\"Status\"\n                                name=\"status\"\n                                rules={[{ required: true, message: 'Required' }]}\n                            >\n                                <Select name=\"status\" placeholder=\"Select Status\"\n                                    onSelect={v => handleNumberChange(\"status\", v)}\n                                >\n                                    <Select.Option key=\"active\" value=\"active\" >Active</Select.Option>\n                                    <Select.Option key=\"inactive\" value=\"inactive\">Inactive</Select.Option>\n                                </Select>\n                            </Form.Item>\n                        </Col>\n                    </Row>\n\n                    <Button type=\"primary\" htmlType=\"submit\" loading={updateVoucherState.apiState === \"loading\"} >SUBMIT</Button>\n                </Form>\n            </PageContainer>\n        </>\n    )\n}\n\nconst mapStateToProps = (state) => ({\n    updateVoucherState: state.updateVoucher,\n    getVoucherViewState: state.getVoucherView,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateVoucher: (params) => dispatch(updateVoucher(params)),\n    updateVoucherReset: () => dispatch(updateVoucherReset()),\n    getVoucherView: (params) => dispatch(getVoucherView(params)),\n    getVoucherViewReset: () => dispatch(getVoucherViewReset()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VoucherEdit)"]},"metadata":{},"sourceType":"module"}