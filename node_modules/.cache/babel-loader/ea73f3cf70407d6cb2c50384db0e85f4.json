{"ast":null,"code":"import _regeneratorRuntime from\"/home/kuldeep/Git Hub/Vemshala-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kuldeep/Git Hub/Vemshala-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/kuldeep/Git Hub/Vemshala-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/kuldeep/Git Hub/Vemshala-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/kuldeep/Git Hub/Vemshala-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Form,Input,Row,Col,TreeSelect,Button,message,Skeleton}from\"antd\";import{connect}from\"react-redux\";import{v4 as uuidv4}from'uuid';import axios from'axios';import{Redirect}from\"react-router-dom\";import _ from\"lodash\";/* custom component */import Header from\"../../component/Header/Header\";import{PageContainer}from\"../../component/Xcomponent\";/* action */import{getCategoryTree as _getCategoryTree,getCategoryTreeReset as _getCategoryTreeReset}from\"../../action/getCategoryTreeAction\";import{getCategoryView as _getCategoryView,getCategoryViewReset as _getCategoryViewReset}from\"../../action/getCategoryViewAction\";import{updateCategory as _updateCategory,updateCategoryReset as _updateCategoryReset}from\"../../action/updateCategoryAction\";/* others */import{validateImageFile,getS3SingedUrl}from\"../../utils\";import cnf from\"../../config\";var TreeNode=TreeSelect.TreeNode;var CategoryEdit=function CategoryEdit(props){/* variables */var category_id=props.match.params.category_id;var getCategoryTree=props.getCategoryTree,getCategoryTreeReset=props.getCategoryTreeReset,getCategoryTreeState=props.getCategoryTreeState,getCategoryView=props.getCategoryView,getCategoryViewReset=props.getCategoryViewReset,getCategoryViewState=props.getCategoryViewState,updateCategory=props.updateCategory,updateCategoryReset=props.updateCategoryReset,updateCategoryState=props.updateCategoryState;var _useState=useState({category_id:category_id,parent_category_id:null,name:\"\",url_key:\"\",image:\"\",banner_img:\"\",m_banner_img:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],set_image=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),banner_img=_useState6[0],set_banner_img=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),m_banner_img=_useState8[0],set_m_banner_img=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),submitLoading=_useState10[0],setSubmitLoading=_useState10[1];var _useState11=useState([false,'']),_useState12=_slicedToArray(_useState11,2),redirect=_useState12[0],setRedirect=_useState12[1];var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState13=useState({image:false,banner_img:false,m_banner_img:false}),_useState14=_slicedToArray(_useState13,2),imgChanged=_useState14[0],setImgChanged=_useState14[1];/* callbacks */useEffect(function(){return function(){getCategoryTreeReset();getCategoryViewReset();updateCategoryReset();};},[]);useEffect(function(){getCategoryTree();getCategoryView({category_id:category_id});},[]);useEffect(function(){if(getCategoryViewState.apiState===\"success\"){var _objectSpread2;form.setFieldsValue({parent_category_id:getCategoryViewState.category.parent_category_id,name:getCategoryViewState.category.name,url_key:getCategoryViewState.category.url_key});setFormData(_objectSpread(_objectSpread({},formData),{},(_objectSpread2={},_defineProperty(_objectSpread2,'parent_category_id',getCategoryViewState.category.parent_category_id),_defineProperty(_objectSpread2,'name',getCategoryViewState.category.name),_defineProperty(_objectSpread2,'url_key',getCategoryViewState.category.url_key),_defineProperty(_objectSpread2,'image',getCategoryViewState.category.image),_defineProperty(_objectSpread2,'banner_img',getCategoryViewState.category.banner_img),_defineProperty(_objectSpread2,'m_banner_img',getCategoryViewState.category.m_banner_img),_objectSpread2)));}},[getCategoryViewState]);useEffect(function(){if(updateCategoryState.apiState===\"success\"){setRedirect([true,'/category/list']);message.success(updateCategoryState.message);}if(updateCategoryState.apiState===\"error\"){updateCategoryReset();message.error(updateCategoryState.message);setSubmitLoading(false);}},[updateCategoryState]);/* function */var categoryOptions=function categoryOptions(tree){var finalJsx=[];tree.map(function(node){if(node.children.length>0){finalJsx.push(/*#__PURE__*/React.createElement(TreeNode,{value:node.id,title:node.name},categoryOptions(node.children)));}else{finalJsx.push(/*#__PURE__*/React.createElement(TreeNode,{value:node.id,title:node.name}));}});return finalJsx;};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var image_filename,banner_img_filename,m_banner_img_filename,imageValRes,bannerImageValRes,mBannerImageValRes,s3UrlRes1,s3UrlRes2,s3UrlRes3;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(category_id==formData.parent_category_id)){_context.next=3;break;}alert(\"You can't select same category as parent category!\");return _context.abrupt(\"return\");case 3:image_filename=uuidv4();banner_img_filename=uuidv4();m_banner_img_filename=uuidv4();if(!imgChanged.image){_context.next=11;break;}imageValRes=validateImageFile(image);if(imageValRes.status){_context.next=11;break;}alert(\"Image's extension is not allowed.\");return _context.abrupt(\"return\");case 11:if(!imgChanged.banner_img){_context.next=16;break;}bannerImageValRes=validateImageFile(banner_img);if(bannerImageValRes.status){_context.next=16;break;}alert(\"Banner Image's extension is not allowed.\");return _context.abrupt(\"return\");case 16:if(!imgChanged.m_banner_img){_context.next=21;break;}mBannerImageValRes=validateImageFile(m_banner_img);if(mBannerImageValRes.status){_context.next=21;break;}alert(\"Mobile Banner Image's extension is not allowed.\");return _context.abrupt(\"return\");case 21:setSubmitLoading(true);if(!imgChanged.image){_context.next=30;break;}console.log(\"hello\",\"uploading image\");_context.next=26;return getS3SingedUrl(image_filename,imageValRes.ext,image);case 26:s3UrlRes1=_context.sent;_context.next=29;return axios.put(s3UrlRes1.url,image);case 29:formData.image=\"\".concat(image_filename,\".\").concat(imageValRes.ext);case 30:if(!imgChanged.banner_img){_context.next=38;break;}console.log(\"hello\",\"uploading banner_img\");_context.next=34;return getS3SingedUrl(banner_img_filename,bannerImageValRes.ext,banner_img);case 34:s3UrlRes2=_context.sent;_context.next=37;return axios.put(s3UrlRes2.url,banner_img);case 37:formData.banner_img=\"\".concat(banner_img_filename,\".\").concat(bannerImageValRes.ext);case 38:if(!imgChanged.m_banner_img){_context.next=46;break;}console.log(\"hello\",\"uploading m_banner_img\");_context.next=42;return getS3SingedUrl(m_banner_img_filename,mBannerImageValRes.ext,m_banner_img);case 42:s3UrlRes3=_context.sent;_context.next=45;return axios.put(s3UrlRes3.url,m_banner_img);case 45:formData.m_banner_img=\"\".concat(m_banner_img_filename,\".\").concat(mBannerImageValRes.ext);case 46:updateCategory(_.merge(formData,{imgChanged:imgChanged}));case 47:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,redirect[0]&&/*#__PURE__*/React.createElement(Redirect,{to:redirect[1]}),/*#__PURE__*/React.createElement(Header,{title:\"Category Edit\"}),/*#__PURE__*/React.createElement(PageContainer,null,getCategoryViewState.apiState===\"loading\"&&/*#__PURE__*/React.createElement(Skeleton,{active:true}),getCategoryViewState.apiState===\"error\"&&/*#__PURE__*/React.createElement(\"p\",null,getCategoryViewState.message),getCategoryViewState.apiState===\"success\"&&/*#__PURE__*/React.createElement(Form,{form:form,layout:\"vertical\",onFinish:handleSubmit},/*#__PURE__*/React.createElement(Row,{gutter:\"24\"},/*#__PURE__*/React.createElement(Col,{span:\"12\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Parent Category (Empty for Root level category)\",name:\"parent_category_id\"},/*#__PURE__*/React.createElement(TreeSelect,{showSearch:true,filterTreeNode:function filterTreeNode(input,treeNode){return treeNode.title.toLowerCase().indexOf(input.toLowerCase())>=0;},style:{width:'100%'},dropdownStyle:{maxHeight:400,overflow:'auto'},placeholder:\"Blank for root category\",allowClear:true,treeDefaultExpandAll:true,onChange:function onChange(value,node){return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},'parent_category_id',value)));}},categoryOptions(getCategoryTreeState.tree)))),/*#__PURE__*/React.createElement(Col,{span:\"12\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Name\",name:\"name\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(Input,{name:\"name\",placeholder:\"Enter Category Name\",onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},'name',e.target.value)));}})))),/*#__PURE__*/React.createElement(Row,{gutter:\"24\"},/*#__PURE__*/React.createElement(Col,{span:\"12\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"URL Key\",name:\"url_key\",rules:[{required:true,message:'Required'},{pattern:new RegExp('^[a-zA-Z0-9-.]+$'),message:\"This field must be a valid url. It should only contain alphanumeric character, dash(-) and dot(.)\"}]},/*#__PURE__*/React.createElement(Input,{name:\"url_key\",placeholder:\"Enter Category URL Key\",onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},'url_key',e.target.value)));},addonBefore:cnf.domain}))),/*#__PURE__*/React.createElement(Col,{span:\"12\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Image\",name:\"image\",extra:/*#__PURE__*/React.createElement(\"span\",null,\"JPEG, JPG, PNG, WEBP | 1:1 Ratio  \")},!imgChanged.image&&/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(cnf.s3_base_url).concat(getCategoryViewState.category.image),alt:\"\",style:{maxWidth:\"100%\",maxHeight:150}}),/*#__PURE__*/React.createElement(Input,{type:\"file\",name:\"image\",onChange:function onChange(e){setImgChanged(_objectSpread(_objectSpread({},imgChanged),{},_defineProperty({},'image',true)));set_image(e.target.files[0]);}})))),/*#__PURE__*/React.createElement(Row,{gutter:\"24\"},/*#__PURE__*/React.createElement(Col,{span:\"12\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Banner Image\",name:\"banner_img\",extra:/*#__PURE__*/React.createElement(\"span\",null,\"JPEG, JPG, PNG, WEBP | 4:1 Ratio  \")},!imgChanged.banner_img&&/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(cnf.s3_base_url).concat(getCategoryViewState.category.banner_img),alt:\"\",style:{maxWidth:\"100%\",maxHeight:150}}),/*#__PURE__*/React.createElement(Input,{type:\"file\",name:\"banner_img\",onChange:function onChange(e){setImgChanged(_objectSpread(_objectSpread({},imgChanged),{},_defineProperty({},'banner_img',true)));set_banner_img(e.target.files[0]);}}))),/*#__PURE__*/React.createElement(Col,{span:\"12\"},/*#__PURE__*/React.createElement(Form.Item,{label:\"Banner Image For Mobile\",name:\"m_banner_img\",extra:/*#__PURE__*/React.createElement(\"span\",null,\"JPEG, JPG, PNG, WEBP | 3:2 Ratio  \")},!imgChanged.m_banner_img&&/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(cnf.s3_base_url).concat(getCategoryViewState.category.m_banner_img),alt:\"\",style:{maxWidth:\"100%\",maxHeight:150}}),/*#__PURE__*/React.createElement(Input,{type:\"file\",name:\"m_banner_img\",onChange:function onChange(e){setImgChanged(_objectSpread(_objectSpread({},imgChanged),{},_defineProperty({},'m_banner_img',true)));set_m_banner_img(e.target.files[0]);}})))),/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",loading:submitLoading},\"SUBMIT\"))));};var mapStateToProps=function mapStateToProps(state){return{getCategoryTreeState:state.getCategoryTree,getCategoryViewState:state.getCategoryView,updateCategoryState:state.updateCategory};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getCategoryTree:function getCategoryTree(params){return dispatch(_getCategoryTree(params));},getCategoryTreeReset:function getCategoryTreeReset(){return dispatch(_getCategoryTreeReset());},getCategoryView:function getCategoryView(params){return dispatch(_getCategoryView(params));},getCategoryViewReset:function getCategoryViewReset(){return dispatch(_getCategoryViewReset());},updateCategory:function updateCategory(params){return dispatch(_updateCategory(params));},updateCategoryReset:function updateCategoryReset(){return dispatch(_updateCategoryReset());}};};export default connect(mapStateToProps,mapDispatchToProps)(CategoryEdit);","map":{"version":3,"sources":["/home/kuldeep/Git Hub/Vemshala-Admin/src/page/CategoryEdit/CategoryEdit.js"],"names":["React","useState","useEffect","Form","Input","Row","Col","TreeSelect","Button","message","Skeleton","connect","v4","uuidv4","axios","Redirect","_","Header","PageContainer","getCategoryTree","getCategoryTreeReset","getCategoryView","getCategoryViewReset","updateCategory","updateCategoryReset","validateImageFile","getS3SingedUrl","cnf","TreeNode","CategoryEdit","props","category_id","match","params","getCategoryTreeState","getCategoryViewState","updateCategoryState","parent_category_id","name","url_key","image","banner_img","m_banner_img","formData","setFormData","set_image","set_banner_img","set_m_banner_img","submitLoading","setSubmitLoading","redirect","setRedirect","useForm","form","imgChanged","setImgChanged","apiState","setFieldsValue","category","success","error","categoryOptions","tree","finalJsx","map","node","children","length","push","id","handleSubmit","alert","image_filename","banner_img_filename","m_banner_img_filename","imageValRes","status","bannerImageValRes","mBannerImageValRes","console","log","ext","s3UrlRes1","put","url","s3UrlRes2","s3UrlRes3","merge","input","treeNode","title","toLowerCase","indexOf","width","maxHeight","overflow","value","required","e","target","pattern","RegExp","domain","s3_base_url","maxWidth","files","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Form, Input, Row, Col, TreeSelect, Button, message, Skeleton } from \"antd\"\nimport { connect } from \"react-redux\"\nimport { v4 as uuidv4 } from 'uuid'\nimport axios from 'axios'\nimport { Redirect } from \"react-router-dom\"\nimport _ from \"lodash\"\n\n/* custom component */\nimport Header from \"../../component/Header/Header\"\nimport { PageContainer } from \"../../component/Xcomponent\"\n\n/* action */\nimport { getCategoryTree, getCategoryTreeReset } from \"../../action/getCategoryTreeAction\"\nimport { getCategoryView, getCategoryViewReset } from \"../../action/getCategoryViewAction\"\nimport { updateCategory, updateCategoryReset } from \"../../action/updateCategoryAction\"\n\n/* others */\nimport { validateImageFile, getS3SingedUrl } from \"../../utils\"\nimport cnf from \"../../config\"\n\nconst { TreeNode } = TreeSelect\n\nconst CategoryEdit = props => {\n    /* variables */\n    const category_id = props.match.params.category_id\n    const {\n        getCategoryTree, getCategoryTreeReset, getCategoryTreeState,\n        getCategoryView, getCategoryViewReset, getCategoryViewState,\n        updateCategory, updateCategoryReset, updateCategoryState,\n    } = props\n    const [formData, setFormData] = useState({\n        category_id: category_id,\n        parent_category_id: null,\n        name: \"\",\n        url_key: \"\",\n        image: \"\",\n        banner_img: \"\",\n        m_banner_img: \"\"\n    })\n    const [image, set_image] = useState(null)\n    const [banner_img, set_banner_img] = useState(null)\n    const [m_banner_img, set_m_banner_img] = useState(null)\n    const [submitLoading, setSubmitLoading] = useState(false)\n    const [redirect, setRedirect] = useState([false, ''])\n    const [form] = Form.useForm()\n    const [imgChanged, setImgChanged] = useState({\n        image: false,\n        banner_img: false,\n        m_banner_img: false,\n    })\n\n    /* callbacks */\n    useEffect(() => {\n        return (() => {\n            getCategoryTreeReset()\n            getCategoryViewReset()\n            updateCategoryReset()\n        })\n    }, [])\n\n    useEffect(() => {\n        getCategoryTree()\n        getCategoryView({ category_id: category_id })\n    }, [])\n\n    useEffect(() => {\n        if (getCategoryViewState.apiState === \"success\") {\n            form.setFieldsValue({\n                parent_category_id: getCategoryViewState.category.parent_category_id,\n                name: getCategoryViewState.category.name,\n                url_key: getCategoryViewState.category.url_key,\n            })\n            setFormData({\n                ...formData,\n                ['parent_category_id']: getCategoryViewState.category.parent_category_id,\n                ['name']: getCategoryViewState.category.name,\n                ['url_key']: getCategoryViewState.category.url_key,\n                ['image']: getCategoryViewState.category.image,\n                ['banner_img']: getCategoryViewState.category.banner_img,\n                ['m_banner_img']: getCategoryViewState.category.m_banner_img,\n            })\n        }\n    }, [getCategoryViewState])\n\n    useEffect(() => {\n        if (updateCategoryState.apiState === \"success\") {\n            setRedirect([true, '/category/list'])\n            message.success(updateCategoryState.message);\n        }\n\n        if (updateCategoryState.apiState === \"error\") {\n            updateCategoryReset()\n            message.error(updateCategoryState.message);\n            setSubmitLoading(false)\n        }\n    }, [updateCategoryState])\n\n\n\n    /* function */\n    const categoryOptions = (tree) => {\n        let finalJsx = []\n        tree.map(node => {\n            if (node.children.length > 0) {\n                finalJsx.push(\n                    <TreeNode value={node.id} title={node.name}>{categoryOptions(node.children)}</TreeNode>\n                )\n            } else {\n                finalJsx.push(\n                    <TreeNode value={node.id} title={node.name} />\n                )\n            }\n        })\n        return finalJsx\n    }\n\n    const handleSubmit = async () => {\n        if (category_id == formData.parent_category_id) {\n            alert(\"You can't select same category as parent category!\")\n            return\n        }\n\n\n        let image_filename = uuidv4()\n        let banner_img_filename = uuidv4()\n        let m_banner_img_filename = uuidv4()\n\n        let imageValRes\n        let bannerImageValRes\n        let mBannerImageValRes\n\n        if (imgChanged.image) {\n            imageValRes = validateImageFile(image)\n            if (!imageValRes.status) {\n                alert(\"Image's extension is not allowed.\")\n                return\n            }\n        }\n\n        if (imgChanged.banner_img) {\n            bannerImageValRes = validateImageFile(banner_img)\n            if (!bannerImageValRes.status) {\n                alert(\"Banner Image's extension is not allowed.\")\n                return\n            }\n        }\n\n        if (imgChanged.m_banner_img) {\n            mBannerImageValRes = validateImageFile(m_banner_img)\n            if (!mBannerImageValRes.status) {\n                alert(\"Mobile Banner Image's extension is not allowed.\")\n                return\n            }\n        }\n\n\n        setSubmitLoading(true)\n\n        if (imgChanged.image) {\n            console.log(\"hello\", \"uploading image\");\n            let s3UrlRes1 = await getS3SingedUrl(image_filename, imageValRes.ext, image)\n            await axios.put(s3UrlRes1.url, image)\n            formData.image = `${image_filename}.${imageValRes.ext}`\n        }\n\n        if (imgChanged.banner_img) {\n            console.log(\"hello\", \"uploading banner_img\");\n            let s3UrlRes2 = await getS3SingedUrl(banner_img_filename, bannerImageValRes.ext, banner_img)\n            await axios.put(s3UrlRes2.url, banner_img)\n            formData.banner_img = `${banner_img_filename}.${bannerImageValRes.ext}`\n        }\n\n        if (imgChanged.m_banner_img) {\n            console.log(\"hello\", \"uploading m_banner_img\");\n            let s3UrlRes3 = await getS3SingedUrl(m_banner_img_filename, mBannerImageValRes.ext, m_banner_img)\n            await axios.put(s3UrlRes3.url, m_banner_img)\n            formData.m_banner_img = `${m_banner_img_filename}.${mBannerImageValRes.ext}`\n        }\n\n        updateCategory(_.merge(formData, { imgChanged: imgChanged }))\n\n    }\n\n    return (\n        <>\n            {redirect[0] &&\n                <Redirect to={redirect[1]} />}\n\n            <Header\n                title=\"Category Edit\"\n            />\n            <PageContainer>\n                {getCategoryViewState.apiState === \"loading\" &&\n                    <Skeleton active />\n                }\n\n                {getCategoryViewState.apiState === \"error\" &&\n                    <p>{getCategoryViewState.message}</p>\n                }\n\n                {getCategoryViewState.apiState === \"success\" &&\n                    <Form form={form} layout=\"vertical\" onFinish={handleSubmit}>\n                        <Row gutter=\"24\" >\n                            <Col span=\"12\">\n                                <Form.Item\n                                    label=\"Parent Category (Empty for Root level category)\"\n                                    name=\"parent_category_id\"\n                                >\n                                    <TreeSelect\n                                        showSearch\n                                        filterTreeNode={(input, treeNode) =>\n                                            treeNode.title.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                        }\n                                        style={{ width: '100%' }}\n                                        dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n                                        placeholder=\"Blank for root category\"\n                                        allowClear\n                                        treeDefaultExpandAll\n                                        onChange={(value, node) => setFormData({ ...formData, ['parent_category_id']: value })}\n                                    >\n                                        {categoryOptions(getCategoryTreeState.tree)}\n                                    </TreeSelect>\n                                </Form.Item>\n                            </Col>\n\n                            <Col span=\"12\" >\n                                <Form.Item\n                                    label=\"Name\"\n                                    name=\"name\"\n                                    rules={[{ required: true, message: 'Required' }]}\n                                >\n                                    <Input name=\"name\" placeholder=\"Enter Category Name\"\n                                        onChange={(e) => setFormData({ ...formData, ['name']: e.target.value })}\n                                    />\n                                </Form.Item>\n                            </Col>\n                        </Row>\n\n                        <Row gutter=\"24\" >\n                            <Col span=\"12\" >\n                                <Form.Item\n                                    label=\"URL Key\"\n                                    name=\"url_key\"\n                                    rules={[\n                                        { required: true, message: 'Required' },\n                                        {\n                                            pattern: new RegExp('^[a-zA-Z0-9-.]+$'),\n                                            message: \"This field must be a valid url. It should only contain alphanumeric character, dash(-) and dot(.)\"\n                                        }\n                                    ]}\n                                >\n                                    <Input name=\"url_key\" placeholder=\"Enter Category URL Key\"\n                                        onChange={(e) => setFormData({ ...formData, ['url_key']: e.target.value })}\n                                        addonBefore={cnf.domain}\n                                    />\n                                </Form.Item>\n                            </Col>\n\n                            <Col span=\"12\" >\n                                <Form.Item\n                                    label=\"Image\"\n                                    name=\"image\"\n                                    extra={<span>JPEG, JPG, PNG, WEBP | 1:1 Ratio  </span>}\n                                >\n                                    {!imgChanged.image &&\n                                        <img src={`${cnf.s3_base_url}${getCategoryViewState.category.image}`} alt=\"\" style={{ maxWidth: \"100%\", maxHeight: 150 }} />}\n                                    <Input type=\"file\" name=\"image\"\n                                        onChange={e => {\n                                            setImgChanged({ ...imgChanged, ['image']: true })\n                                            set_image(e.target.files[0])\n                                        }}\n                                    />\n                                </Form.Item>\n                            </Col>\n                        </Row>\n\n                        <Row gutter=\"24\" >\n                            <Col span=\"12\" >\n                                <Form.Item\n                                    label=\"Banner Image\"\n                                    name=\"banner_img\"\n                                    extra={<span>JPEG, JPG, PNG, WEBP | 4:1 Ratio  </span>}\n                                >\n                                    {!imgChanged.banner_img &&\n                                        <img src={`${cnf.s3_base_url}${getCategoryViewState.category.banner_img}`} alt=\"\" style={{ maxWidth: \"100%\", maxHeight: 150 }} />}\n                                    <Input type=\"file\" name=\"banner_img\"\n                                        onChange={e => {\n                                            setImgChanged({ ...imgChanged, ['banner_img']: true })\n                                            set_banner_img(e.target.files[0])\n                                        }}\n                                    />\n                                </Form.Item>\n                            </Col>\n\n                            <Col span=\"12\" >\n                                <Form.Item\n                                    label=\"Banner Image For Mobile\"\n                                    name=\"m_banner_img\"\n                                    extra={<span>JPEG, JPG, PNG, WEBP | 3:2 Ratio  </span>}\n                                >\n                                    {!imgChanged.m_banner_img &&\n                                        <img src={`${cnf.s3_base_url}${getCategoryViewState.category.m_banner_img}`} alt=\"\" style={{ maxWidth: \"100%\", maxHeight: 150 }} />}\n                                    <Input type=\"file\" name=\"m_banner_img\"\n                                        onChange={e => {\n                                            setImgChanged({ ...imgChanged, ['m_banner_img']: true })\n                                            set_m_banner_img(e.target.files[0])\n                                        }}\n                                    />\n                                </Form.Item>\n                            </Col>\n                        </Row>\n\n                        <Button type=\"primary\" htmlType=\"submit\" loading={submitLoading} >SUBMIT</Button>\n\n                    </Form>\n                }\n            </PageContainer>\n        </>\n    )\n}\n\nconst mapStateToProps = (state) => ({\n    getCategoryTreeState: state.getCategoryTree,\n    getCategoryViewState: state.getCategoryView,\n    updateCategoryState: state.updateCategory,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n    getCategoryTree: (params) => dispatch(getCategoryTree(params)),\n    getCategoryTreeReset: () => dispatch(getCategoryTreeReset()),\n    getCategoryView: (params) => dispatch(getCategoryView(params)),\n    getCategoryViewReset: () => dispatch(getCategoryViewReset()),\n    updateCategory: (params) => dispatch(updateCategory(params)),\n    updateCategoryReset: () => dispatch(updateCategoryReset()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoryEdit)"]},"metadata":{},"sourceType":"module"}