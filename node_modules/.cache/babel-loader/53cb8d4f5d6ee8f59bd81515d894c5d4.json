{"ast":null,"code":"import _slicedToArray from\"/home/kuldeep/Git Hub/Vemshala-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Button,Tree,Skeleton,Space,Popconfirm,message}from\"antd\";import{Link,Redirect}from'react-router-dom';import{connect}from\"react-redux\";import{EditOutlined,DeleteOutlined}from\"@ant-design/icons\";/* custom component */import Header from\"../../component/Header/Header\";import{PageContainer}from\"../../component/Xcomponent\";/* action */import{getCategoryTree as _getCategoryTree,getCategoryTreeReset as _getCategoryTreeReset}from\"../../action/getCategoryTreeAction\";import{deleteCategory as _deleteCategory,deleteCategoryReset as _deleteCategoryReset}from\"../../action/deleteCategoryAction\";/* others */import cnf from\"../../config\";var CategoryList=function CategoryList(props){/* variables */var getCategoryTree=props.getCategoryTree,getCategoryTreeReset=props.getCategoryTreeReset,getCategoryTreeState=props.getCategoryTreeState,deleteCategory=props.deleteCategory,deleteCategoryReset=props.deleteCategoryReset,deleteCategoryState=props.deleteCategoryState;var _useState=useState([false,\"\"]),_useState2=_slicedToArray(_useState,2),redirect=_useState2[0],setRedirect=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),refresh=_useState4[0],setRefresh=_useState4[1];/* callbacks */useEffect(function(){getCategoryTree();},[refresh]);useEffect(function(){if(deleteCategoryState.apiState===\"success\"){message.success(deleteCategoryState.message);deleteCategoryReset();setRefresh(refresh+1);}if(deleteCategoryState.apiState===\"error\"){message.error(deleteCategoryState.message);deleteCategoryReset();}},[deleteCategoryState]);/* functions */var getTreeData=function getTreeData(tree){var finalArray=[];tree.map(function(node){if(node.children.length>0){finalArray.push({title:/*#__PURE__*/React.createElement(Space,{style:{margin:'1em'}},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(cnf.s3_base_url).concat(node.image),alt:\"\",style:{width:40}}),/*#__PURE__*/React.createElement(\"span\",null,node.name),/*#__PURE__*/React.createElement(Link,{to:\"/category/\".concat(node.id,\"/edit\")},/*#__PURE__*/React.createElement(Button,{size:\"small\",icon:/*#__PURE__*/React.createElement(EditOutlined,null)})),/*#__PURE__*/React.createElement(Popconfirm,{title:\"Are you sure to delete this category? !!Note: Deleteting this category, all the children will be deleted also!!\",onConfirm:function onConfirm(){return deleteCategory({category_id:node.id});},okText:\"Delete\",cancelText:\"Cancel\",okType:\"danger\"},/*#__PURE__*/React.createElement(Button,{size:\"small\",icon:/*#__PURE__*/React.createElement(DeleteOutlined,null),loading:deleteCategoryState.apiState===\"loading\"}))),key:node.id,children:getTreeData(node.children)});}else{finalArray.push({title:/*#__PURE__*/React.createElement(Space,{style:{margin:'1em'}},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(cnf.s3_base_url).concat(node.image),alt:\"\",style:{width:40}}),/*#__PURE__*/React.createElement(\"span\",null,node.name),/*#__PURE__*/React.createElement(Link,{to:\"/category/\".concat(node.id,\"/edit\")},/*#__PURE__*/React.createElement(Button,{size:\"small\",icon:/*#__PURE__*/React.createElement(EditOutlined,null)})),/*#__PURE__*/React.createElement(Popconfirm,{title:\"Are you sure to delete this category? !!Note: Deleteting this category, all the children will be deleted also!!\",onConfirm:function onConfirm(){return deleteCategory({category_id:node.id});},okText:\"Delete\",cancelText:\"Cancel\",okType:\"danger\"},/*#__PURE__*/React.createElement(Button,{size:\"small\",icon:/*#__PURE__*/React.createElement(DeleteOutlined,null),loading:deleteCategoryState.apiState===\"loading\"}))),key:node.id});}});return finalArray;};return/*#__PURE__*/React.createElement(React.Fragment,null,redirect[0]&&/*#__PURE__*/React.createElement(Redirect,{to:redirect[1]}),/*#__PURE__*/React.createElement(Header,{title:\"Category List\",actionBtn:/*#__PURE__*/React.createElement(Link,{to:\"/category/add\"},/*#__PURE__*/React.createElement(Button,null,\"New\"))}),/*#__PURE__*/React.createElement(PageContainer,null,getCategoryTreeState.apiState===\"loading\"&&/*#__PURE__*/React.createElement(Skeleton,{active:true}),getCategoryTreeState.apiState===\"error\"&&/*#__PURE__*/React.createElement(\"h1\",null,\"Something is not right\"),getCategoryTreeState.apiState===\"success\"&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{style:{borderRadius:'10px',border:\"solid 1px #ccc\",backgroundColor:'white',height:'100%',width:\"100%\",padding:10}},/*#__PURE__*/React.createElement(Tree,{treeData:getTreeData(getCategoryTreeState.tree),showLine:{showLeafIcon:false},showIcon:false,selectable:false})))));};var mapStateToProps=function mapStateToProps(state){return{getCategoryTreeState:state.getCategoryTree,deleteCategoryState:state.deleteCategory};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getCategoryTree:function getCategoryTree(params){return dispatch(_getCategoryTree(params));},getCategoryTreeReset:function getCategoryTreeReset(){return dispatch(_getCategoryTreeReset());},deleteCategory:function deleteCategory(params){return dispatch(_deleteCategory(params));},deleteCategoryReset:function deleteCategoryReset(){return dispatch(_deleteCategoryReset());}};};export default connect(mapStateToProps,mapDispatchToProps)(CategoryList);","map":{"version":3,"names":["React","useState","useEffect","Button","Tree","Skeleton","Space","Popconfirm","message","Link","Redirect","connect","EditOutlined","DeleteOutlined","Header","PageContainer","getCategoryTree","getCategoryTreeReset","deleteCategory","deleteCategoryReset","cnf","CategoryList","props","getCategoryTreeState","deleteCategoryState","redirect","setRedirect","refresh","setRefresh","apiState","success","error","getTreeData","tree","finalArray","map","node","children","length","push","title","margin","s3_base_url","image","width","name","id","category_id","key","borderRadius","border","backgroundColor","height","padding","showLeafIcon","mapStateToProps","state","mapDispatchToProps","dispatch","params"],"sources":["/home/kuldeep/Git Hub/Vemshala-Admin/src/page/CategoryList/CategoryList.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Button, Tree, Skeleton, Space, Popconfirm, message } from \"antd\"\nimport { Link, Redirect } from 'react-router-dom'\nimport { connect } from \"react-redux\"\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\"\n\n/* custom component */\nimport Header from \"../../component/Header/Header\"\nimport { PageContainer } from \"../../component/Xcomponent\"\n\n/* action */\nimport { getCategoryTree, getCategoryTreeReset } from \"../../action/getCategoryTreeAction\"\nimport { deleteCategory, deleteCategoryReset } from \"../../action/deleteCategoryAction\"\n\n/* others */\nimport cnf from \"../../config\"\n\nconst CategoryList = props => {\n    /* variables */\n    const {\n        getCategoryTree, getCategoryTreeReset, getCategoryTreeState,\n        deleteCategory, deleteCategoryReset, deleteCategoryState\n    } = props\n    const [redirect, setRedirect] = useState([false, \"\"])\n    const [refresh, setRefresh] = useState(0)\n\n    /* callbacks */\n    useEffect(() => {\n        getCategoryTree()\n    }, [refresh])\n\n    useEffect(() => {\n        if (deleteCategoryState.apiState === \"success\") {\n            message.success(deleteCategoryState.message);\n            deleteCategoryReset()\n            setRefresh(refresh + 1)\n        }\n\n        if (deleteCategoryState.apiState === \"error\") {\n            message.error(deleteCategoryState.message);\n            deleteCategoryReset()\n        }\n    }, [deleteCategoryState])\n\n    /* functions */\n    const getTreeData = (tree) => {\n        let finalArray = []\n        tree.map(node => {\n            if (node.children.length > 0) {\n                finalArray.push(\n                    {\n                        title: (<Space style={{margin:'1em'}}>\n                            <img src={`${cnf.s3_base_url}${node.image}`} alt=\"\" style={{ width: 40 }} />\n                            <span>{node.name}</span>\n                            <Link to={`/category/${node.id}/edit`}><Button size=\"small\" icon={<EditOutlined />} /></Link>\n                            <Popconfirm\n                                title=\"Are you sure to delete this category? !!Note: Deleteting this category, all the children will be deleted also!!\"\n                                onConfirm={() => deleteCategory({ category_id: node.id })}\n                                okText=\"Delete\"\n                                cancelText=\"Cancel\"\n                                okType=\"danger\"\n                            >\n                                <Button size=\"small\" icon={<DeleteOutlined />} loading={deleteCategoryState.apiState === \"loading\"} />\n                            </Popconfirm>\n                        </Space>),\n                        key: node.id,\n                        children: getTreeData(node.children)\n                    }\n                )\n            } else {\n                finalArray.push(\n                    {\n                        title: (<Space style={{margin:'1em'}}>\n                            <img src={`${cnf.s3_base_url}${node.image}`} alt=\"\" style={{ width: 40 }} />\n                            <span>{node.name}</span>\n                            <Link to={`/category/${node.id}/edit`}><Button size=\"small\" icon={<EditOutlined />} /></Link>\n                            <Popconfirm\n                                title=\"Are you sure to delete this category? !!Note: Deleteting this category, all the children will be deleted also!!\"\n                                onConfirm={() => deleteCategory({ category_id: node.id })}\n                                okText=\"Delete\"\n                                cancelText=\"Cancel\"\n                                okType=\"danger\"\n                            >\n                                <Button size=\"small\" icon={<DeleteOutlined />} loading={deleteCategoryState.apiState === \"loading\"} />\n                            </Popconfirm>\n                        </Space>),\n                        key: node.id,\n                    }\n                )\n            }\n\n        })\n        return finalArray\n    }\n\n\n\n    return (\n        <>\n            {redirect[0] &&\n                <Redirect to={redirect[1]} />}\n\n\n            <Header\n                title=\"Category List\"\n                actionBtn={<Link to='/category/add'><Button >New</Button></Link>}\n            />\n            <PageContainer>\n                {getCategoryTreeState.apiState === \"loading\" &&\n                    <Skeleton active />}\n\n                {getCategoryTreeState.apiState === \"error\" &&\n                    <h1>Something is not right</h1>}\n\n                {getCategoryTreeState.apiState === \"success\" &&\n                    <>\n                        <div style={{ borderRadius:'10px', border: \"solid 1px #ccc\",backgroundColor:'white',height:'100%',width: \"100%\", padding: 10 }} >\n                            <Tree\n                                treeData={getTreeData(getCategoryTreeState.tree)}\n                                showLine={{ showLeafIcon: false }}\n                                showIcon={false}\n                                selectable={false}\n                            />\n                        </div>\n                    </>\n                }\n            </PageContainer>\n        </>\n    )\n}\n\nconst mapStateToProps = (state) => ({\n    getCategoryTreeState: state.getCategoryTree,\n    deleteCategoryState: state.deleteCategory,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n    getCategoryTree: (params) => dispatch(getCategoryTree(params)),\n    getCategoryTreeReset: () => dispatch(getCategoryTreeReset()),\n    deleteCategory: (params) => dispatch(deleteCategory(params)),\n    deleteCategoryReset: () => dispatch(deleteCategoryReset()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoryList)"],"mappings":"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"},"metadata":{},"sourceType":"module"}