{"ast":null,"code":"var _jsxFileName = \"/home/kuldeep/Git Hub/Vemshala-Admin/src/page/CustomerList/CustomerList.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\"; // @custom-component-imports ------------------------------------------------------------------------ \n\nimport DataTable from 'react-data-table-component';\nimport DataTableExtensions from 'react-data-table-component-extensions';\nimport 'react-data-table-component-extensions/dist/index.css';\nimport { Button, Modal, notification } from 'antd';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport Header from \"../../component/Header/Header\";\nimport { PageContainer } from \"../../component/Xcomponent\";\nimport updateStatus from \"../../api/updateCustomerStatus\"; // @actions-imports ----------------------------------------------------------------------------------\n\nimport { getOrderList, getOrderListReset } from \"../../action/getOrderListAction\";\nimport { getCustomerList, getCustomerListReset } from \"../../action/getCustomerListAction\"; //-----------------------------------------------------------------------------------------------------\n\nconst CustomerList = props => {\n  console.clear();\n  console.log(props);\n  const {\n    getCustomerList,\n    getCustomerListState\n  } = props;\n  const [tableData, setTableData] = useState([]);\n\n  const openNotificationWithIcon = (type, message, description = \"\") => {\n    notification[type]({\n      message: message,\n      description: description\n    });\n  };\n\n  const showStatusChangeModal = data => {\n    Modal.confirm({\n      title: 'Confirm',\n      icon: /*#__PURE__*/React.createElement(ExclamationCircleOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 17\n        }\n      }),\n      content: 'Do you really want to block the customer ?',\n      okText: 'Yes',\n      cancelText: 'No',\n      onOk: function () {\n        return alert(data.status);\n        updateCustomerStatus(data);\n        /* call update-status api */\n      }\n    });\n  };\n\n  const [columns, setColumns] = useState([{\n    name: 'Customer Name',\n    selector: data => data.name,\n    sortable: true\n  }, {\n    name: 'Customer Email',\n    selector: data => data.email,\n    sortable: true\n  }, {\n    name: 'Customer Contact No.',\n    selector: data => data.contact_no,\n    sortable: true\n  }, {\n    name: 'Customer Status',\n    selector: data => data.status,\n    sortable: true\n  }, {\n    name: 'Register Date',\n    selector: data => data.date,\n    sortable: true\n  }, {\n    name: 'Action',\n    selector: data => /*#__PURE__*/React.createElement(Button, {\n      className: data.status === 'Active' ? 'deactivate' : 'active',\n      onClick: () => showStatusChangeModal(data),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 31\n      }\n    }, data.status === 'Active' ? 'Deactivate' : 'Activate'),\n    sortable: true\n  }]);\n  /* @api-call -------------------------------------------------------------------------------------------------*/\n\n  const updateCustomerStatus = async data => {\n    try {\n      const serverResponse = await updateStatus(data);\n\n      if (serverResponse.status === 'error') {\n        throw new Error();\n      }\n\n      openNotificationWithIcon('success', 'Customer status', 'Customer status updated successfully');\n      getCustomerList();\n      /* refresh customers list */\n    } catch (error) {\n      openNotificationWithIcon('error', 'Customer status', 'Customer status could not update');\n    }\n  };\n  /* callbacks -------------------------------------------------------------------------------------------------*/\n\n\n  useEffect(() => {\n    getCustomerList();\n  }, []);\n  useEffect(() => {\n    if (getCustomerListState.apiState === \"success\") {\n      const customerList = getCustomerListState.list.map(data => {\n        const serverDate = date => date.toISOString().slice(0, 10);\n\n        data.created_at = serverDate(new Date(data.created_at));\n        return {\n          id: data.id,\n          name: data.name,\n          email: data.email,\n          date: data.created_at,\n          status: data.status,\n          contact_no: data.contact_no\n        };\n      });\n      setTableData(customerList);\n    }\n  }, [getCustomerListState]);\n  /* ----------------------------------------------------------------------------------------------------------*/\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    title: \"Customer List\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(PageContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DataTableExtensions, {\n    print: false,\n    columns: columns,\n    data: tableData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DataTable, {\n    noHeader: true,\n    defaultSortField: \"id\",\n    defaultSortAsc: false,\n    pagination: true,\n    highlightOnHover: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }))));\n};\n\nconst mapStateToProps = state => ({\n  getOrderListState: state.getOrderList,\n  getCustomerListState: state.getCustomerList\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getOrderList: params => dispatch(getOrderList(params)),\n  getOrderListReset: () => dispatch(getOrderListReset()),\n  getCustomerList: params => dispatch(getCustomerList(params)),\n  getCustomerListReset: () => dispatch(getCustomerListReset())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomerList);","map":{"version":3,"sources":["/home/kuldeep/Git Hub/Vemshala-Admin/src/page/CustomerList/CustomerList.js"],"names":["React","useEffect","useState","connect","DataTable","DataTableExtensions","Button","Modal","notification","ExclamationCircleOutlined","Header","PageContainer","updateStatus","getOrderList","getOrderListReset","getCustomerList","getCustomerListReset","CustomerList","props","console","clear","log","getCustomerListState","tableData","setTableData","openNotificationWithIcon","type","message","description","showStatusChangeModal","data","confirm","title","icon","content","okText","cancelText","onOk","alert","status","updateCustomerStatus","columns","setColumns","name","selector","sortable","email","contact_no","date","serverResponse","Error","error","apiState","customerList","list","map","serverDate","toISOString","slice","created_at","Date","id","mapStateToProps","state","getOrderListState","mapDispatchToProps","dispatch","params"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { connect } from \"react-redux\"\n\n// @custom-component-imports ------------------------------------------------------------------------ \n\n    import DataTable from 'react-data-table-component';\n    import DataTableExtensions from 'react-data-table-component-extensions';\n    import 'react-data-table-component-extensions/dist/index.css';\n    import {  Button, Modal,notification   } from 'antd'\n    import { ExclamationCircleOutlined } from '@ant-design/icons';\n \n    import Header from \"../../component/Header/Header\"\n    import { PageContainer } from \"../../component/Xcomponent\"\n\n    import updateStatus from \"../../api/updateCustomerStatus\";\n\n// @actions-imports ----------------------------------------------------------------------------------\n\n    import { getOrderList, getOrderListReset } from \"../../action/getOrderListAction\"\n    import { getCustomerList, getCustomerListReset } from \"../../action/getCustomerListAction\"\n \n//-----------------------------------------------------------------------------------------------------\n\nconst CustomerList = props => {\n\n  console.clear(); console.log(props)\n   \n    const { getCustomerList, getCustomerListState } = props\n    const [tableData, setTableData] = useState([])\n\n    const openNotificationWithIcon = (type,message,description = \"\") => {\n        notification[type]({\n          message     : message,\n          description : description,\n        });\n    };\n  \n    const showStatusChangeModal = (data) => {\n\n        Modal.confirm({\n          title: 'Confirm',\n          icon: <ExclamationCircleOutlined />,\n          content: 'Do you really want to block the customer ?',\n          okText: 'Yes',\n          cancelText: 'No',\n          onOk: function() { \n\n            return alert(data.status)\n            \n            updateCustomerStatus(data) /* call update-status api */ },\n        });\n    };\n\n    const [columns,setColumns] = useState([{\n            name: 'Customer Name',\n            selector: data => data.name,\n            sortable: true,\n        },{\n            name: 'Customer Email',\n            selector: data => data.email,\n            sortable: true,\n        },{\n            name: 'Customer Contact No.',\n            selector: data => data.contact_no,\n            sortable: true,\n        },{\n            name: 'Customer Status',\n            selector: data => data.status,\n            sortable: true,\n        },{\n            name: 'Register Date',\n            selector: data => data.date,\n            sortable: true,\n        },{\n            name: 'Action',\n            selector: data => <Button className={ data.status === 'Active' ? 'deactivate' : 'active' } onClick={() => showStatusChangeModal(data)}>{ data.status === 'Active' ? 'Deactivate' : 'Activate' }</Button>,\n            sortable: true,\n        }\n    ])\n\n/* @api-call -------------------------------------------------------------------------------------------------*/ \n\n    const updateCustomerStatus = async(data) => {\n\n        try {\n\n            const serverResponse = await updateStatus(data);\n\n            if(serverResponse.status === 'error') { throw new Error(); }\n\n            openNotificationWithIcon('success','Customer status','Customer status updated successfully');\n\n            getCustomerList() /* refresh customers list */\n            \n        } catch (error) { openNotificationWithIcon('error','Customer status','Customer status could not update') }\n    }\n\n/* callbacks -------------------------------------------------------------------------------------------------*/\n\n    useEffect(() => { getCustomerList()}, [])\n    useEffect(() => {\n        \n        if (getCustomerListState.apiState === \"success\") {\n\n            const customerList = getCustomerListState.list.map(data => {\n\n                const serverDate = date => date.toISOString().slice(0, 10);\n\n                data.created_at = serverDate(new Date(data.created_at))\n       \n                return  {\n                    id     : data.id,\n                    name   : data.name,\n                    email  : data.email,\n                    date   : data.created_at,\n                    status : data.status,\n                    contact_no: data.contact_no,\n                }\n            })\n\n            setTableData(customerList);\n        }\n    }, [getCustomerListState])\n\n/* ----------------------------------------------------------------------------------------------------------*/\n\n    return (\n        <React.Fragment>\n            <Header title=\"Customer List\"/>\n            <PageContainer>     \n                <DataTableExtensions print={false} columns={columns} data={tableData} >\n                    <DataTable\n                        noHeader\n                        defaultSortField=\"id\"\n                        defaultSortAsc={false}\n                        pagination\n                        highlightOnHover\n                    />\n                </DataTableExtensions>\n            </PageContainer>\n        </React.Fragment>\n    )\n}\nconst mapStateToProps = (state) => ({\n    getOrderListState    : state.getOrderList,\n    getCustomerListState : state.getCustomerList,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n    getOrderList:         (params) => dispatch(getOrderList(params)),\n    getOrderListReset:    ()       => dispatch(getOrderListReset()),\n    getCustomerList:      (params) => dispatch(getCustomerList(params)),\n    getCustomerListReset: ()       => dispatch(getCustomerListReset()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomerList)"]},"metadata":{},"sourceType":"module"}